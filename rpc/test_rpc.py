import rpc
import binascii


def test_pack_UtaMsCallPsAttachApnConfigReq():
    expected = \
        '0201005582010102040000010402040000000300000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000020400000000554102' \
        '0400000042020400000001000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000055410204000000410204000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '000000000000000000000000000000000000000000000000000000005581FA02' \
        '04000000FA020400000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '00000000000201005581FA0204000000FC020400000002000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000002020000020400000000020400' \
        '0000000204000000000204000000000204000000000204000000000204000000' \
        '0002040000000002040000000002040000000002040000000002040000000002' \
        '0400000000020400000000020400000000020400000000020400000000020400' \
        '0000000204000000000204000000000204000000005514020400000014020400' \
        '0000000000000000000000000000000000000000000000020400000000556502' \
        '0400000068020400000003000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000055820101020400000104020400' \
        '0000030000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000002040000000055410204000000420204000000010000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000554102' \
        '0400000041020400000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000005581FA0204000000FA0204000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000201005581FA0204000000' \
        'FC02040000000200000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000202000002040000000002040000000002040000000002040000000002' \
        '0400000000020400000000020400000000020400000000020400000000020400' \
        '0000000204000000000204000000000204000000000204000000000204000000' \
        '0002040000000002040000000002040000000002040000000002040000000002' \
        '0400000000551402040000001402040000000000000000000000000000000000' \
        '0000000000000002040000000055650204000000680204000000030000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000005582010102040000010402040000000300000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000020400000000554102' \
        '0400000042020400000001000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000055410204000000410204000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '000000000000000000000000000000000000000000000000000000005581FA02' \
        '04000000FA020400000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '00000000000201005581FA0204000000FC020400000002000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000002020000020400000000020400' \
        '0000000204000000000204000000000204000000010204000000000204000000' \
        '0002040000000002040000000002040000000002040000000002040000000002' \
        '0400000001020400000000020400000000020400000404020400000001020400' \
        '0000000204000000010204000000000204000000005514020400000014020400' \
        '0000000000000000000000000000000000000000000000020400000003556502' \
        '040000006802040000000374656C737472612E696E7465726E65740000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000055820101020400000104020400' \
        '0000030000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000002040000000055410204000000420204000000010000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000554102' \
        '0400000041020400000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000005581FA0204000000FA0204000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000201005581FA0204000000' \
        'FC02040000000200000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000202000002040000000002040000000002040000000002040000000002' \
        '0400000001020400000000020400000000020400000000020400000000020400' \
        '0000000204000000000204000000000204000000010204000000000204000000' \
        '0002040000040402040000000102040000000002040000000102040000000002' \
        '0400000000551402040000001402040000000000000000000000000000000000' \
        '00000000000000020400000003556502040000006702040000000274656C7374' \
        '72612E696E7465726E6574000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000000000000000000000000000000000000000000000000000000000000000' \
        '0000020103020400000000'

    assert rpc.pack_UtaMsCallPsAttachApnConfigReq(
        "telstra.internet") == binascii.unhexlify(expected)


def test_pack_UtaRPCPsConnectToDatachannelReq():
    expected = '55180204000000180204000000002F73696F7363632F504349452F494F534D2F4950532F3000'
    assert rpc.pack_UtaRPCPsConnectToDatachannelReq(
        "/sioscc/PCIE/IOSM/IPS/0") == binascii.unhexlify(expected)


def test_pack_UtaMsNetAttachReq():
    expected = \
        '0201000204000000000204000000000204000000000204000000000202FFFF02' \
        '02FFFF020400000000020400000000'
    assert rpc.pack_UtaMsNetAttachReq() == binascii.unhexlify(expected)


def test_pack_UtaMsCallPsGetNegIpAddrReq():
    expected = '020100020400000000020400000000'
    assert rpc.pack_UtaMsCallPsGetNegIpAddrReq() == binascii.unhexlify(expected)


def test_pack_UtaMsCallPsConnectReq():
    expected = '020100020400000006020400000000020400000000'
    assert rpc.pack_UtaMsCallPsConnectReq() == binascii.unhexlify(expected)


if __name__ == "__main__":
    print("running rpc tests")
    test_pack_UtaMsCallPsAttachApnConfigReq()
    test_pack_UtaRPCPsConnectToDatachannelReq()
    test_pack_UtaMsNetAttachReq()
    test_pack_UtaMsCallPsGetNegIpAddrReq()
    test_pack_UtaMsCallPsConnectReq()
